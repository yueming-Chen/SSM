{"version":3,"sources":["../../tmp/page/page.component.ts"],"names":[],"mappings":"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","file":"page.component.js","sourceRoot":"","sourcesContent":["import { Component, HostListener, TemplateRef, OnInit, OnDestroy, ViewChild, ElementRef, ContentChild, Input, EventEmitter, Output, AfterViewInit, AfterContentInit, Renderer, NgZone, ViewEncapsulation } from \"@angular/core\";\nimport { log, bind, range, defaults, cache, falsy } from \"@ay/util\";\nimport { Subscription } from \"rxjs/Rx\";\n\n\n\nexport class PageColmponent implements AfterContentInit {\n\n  public highlight: number = 1;\n  public dataLength: number[];\n\n  \n  Length: number = 0;\n\n  \n  pageDisplayLimit: number = 5;\n\n  \n  pageChange: EventEmitter<number> = new EventEmitter<number>();\n\n  private _nowPage: number = 0;\n\n  \n  public get nowPage(): number {\n    return this._nowPage;\n  }\n\n  public set nowPage(nowPage: number) {\n    if (this._nowPage === nowPage) return;\n    this._nowPage = nowPage;\n    this.pageChange.emit(this._nowPage);\n  }\n\n  \n  prevText: string = \"Prev\";\n\n  \n  nextText: string = \"Next\";\n\n  \n  public DefaultPrevTemplate: TemplateRef<any> = null;\n\n  \n  public prevTemplate: TemplateRef<any> = null;\n\n  \n  public DefaultNextTemplate: TemplateRef<any> = null;\n\n  \n  public nextTemplate: TemplateRef<any> = null;\n\n  \n  public DefaultPageTemplate: TemplateRef<any> = null;\n\n  \n  public pageTemplate: TemplateRef<any> = null;\n\n  constructor() {\n    this._nowPage = 1;\n  }\n\n  ngAfterContentInit() {\n    this.prevTemplate = defaults(this.prevTemplate, this.DefaultPrevTemplate);\n    this.nextTemplate = defaults(this.nextTemplate, this.DefaultNextTemplate);\n    this.pageTemplate = defaults(this.pageTemplate, this.DefaultPageTemplate);\n    this.dataLength = Array(this.Length).fill(\"\").map((x, i) => i + 1); // [0,1,2,3,4]\n  }\n\n  public range(index): boolean {\n    // this.nowPage\n    let num = ~~(this.pageDisplayLimit / 2);\n    let offset = (num == this.pageDisplayLimit / 2) ? 0 : 1;\n    if (this.nowPage <= num) {\n      return (index < this.pageDisplayLimit) ? true : false;\n    } else if (this.nowPage >= this.Length - 2)\n      return (index >= this.Length - this.pageDisplayLimit) ? true : false;\n    return (index >= this.nowPage - (num + offset) && index < this.nowPage + num) ? true : false;\n  }\n\n  // 這樣寫是否好，還是要寫進pug中\n  public clickPage(index) {\n    this.highlight = this.nowPage = index;\n  }\n\n  public prevClick() {\n    this.highlight = this.nowPage = this.nowPage == 1 ? 1 : this.nowPage - 1;\n  }\n\n  public nextClick() {\n    this.highlight = this.nowPage = this.nowPage == this.Length ? this.Length : this.nowPage + 1;\n  }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  template: `\n    <ng-template #DefaultPrevTemplate=\"\" let-text=\"text\"><button class=\"ay-button prev\">{{text}}</button></ng-template><ng-template #DefaultNextTemplate=\"\" let-text=\"text\"><button class=\"ay-button next\">{{text}}</button></ng-template><ng-template #DefaultPageTemplate=\"\" let-data=\"data\" let-i=\"i\"><button class=\"ay-button\" *ngIf=\"range(i)\" [class.choose]=\"highlight == data\">{{data}}</button></ng-template><div class=\"page\" (click)=\"prevClick()\"><ng-template [ngTemplateOutlet]=\"prevTemplate\" [ngOutletContext]=\"{ text: prevText}\"></ng-template></div><ng-template [ngForOf]=\"dataLength\" let-i=\"index\" let-data=\"\" ngFor=\"\"><div class=\"page\" (click)=\"clickPage(data)\"><ng-template [ngTemplateOutlet]=\"pageTemplate\" [ngOutletContext]=\"{data:data,i:i}\"></ng-template></div></ng-template><div class=\"page\" (click)=\"nextClick()\"><ng-template [ngTemplateOutlet]=\"nextTemplate\" [ngOutletContext]=\"{ text: nextText}\"></ng-template></div>\n  `,\n  selector: 'ay-page',\n  styles: [`\n    .page {\n      display: inline-flex; }\n\n    .ay-button {\n      margin-top: 50px;\n      font-size: 1em;\n      background: none;\n      border: 1px solid #ddd;\n      padding: 8px 12px;\n      border-left-width: 0px;\n      transition: color ease-in-out .2s;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none; }\n      .ay-button.prev {\n        border-left-width: 1px;\n        border-top-left-radius: 5px;\n        border-bottom-left-radius: 5px; }\n      .ay-button.next {\n        border-right-width: 1px;\n        border-top-right-radius: 5px;\n        border-bottom-right-radius: 5px; }\n      .ay-button.select {\n        background: #bbb; }\n      .ay-button.choose {\n        background: #0275d8;\n        color: white; }\n      .ay-button:hover {\n        color: #ccc; }\n  `],\n  encapsulation: ViewEncapsulation.None,\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'Length': [{ type: Input },],\n'pageDisplayLimit': [{ type: Input },],\n'pageChange': [{ type: Output },],\n'nowPage': [{ type: Input },],\n'prevText': [{ type: Input },],\n'nextText': [{ type: Input },],\n'DefaultPrevTemplate': [{ type: ViewChild, args: [\"DefaultPrevTemplate\", ] },],\n'prevTemplate': [{ type: ContentChild, args: [\"prevTemplate\", ] },],\n'DefaultNextTemplate': [{ type: ViewChild, args: [\"DefaultNextTemplate\", ] },],\n'nextTemplate': [{ type: ContentChild, args: [\"nextTemplate\", ] },],\n'DefaultPageTemplate': [{ type: ViewChild, args: [\"DefaultPageTemplate\", ] },],\n'pageTemplate': [{ type: ContentChild, args: [\"pageTemplate\", ] },],\n};\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}