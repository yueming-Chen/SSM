{"version":3,"sources":["../../tmp/slider/slider.component.ts"],"names":[],"mappings":"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","file":"slider.component.js","sourceRoot":"","sourcesContent":["import { Component, Input, Output, EventEmitter, Renderer, ElementRef, ViewChild, ViewChildren, HostListener, AfterViewInit, QueryList, ViewEncapsulation } from \"@angular/core\";\nimport { DomSanitizer } from \"@angular/platform-browser\";\nimport { bind } from \"@ay/util/dist\";\n\n\nexport class SliderComponent implements AfterViewInit {\n  private isDragging: boolean = false;\n  private tmpWidth = 0;\n  private tmpLeft = 0;\n  private isStart: boolean = false;\n  public thumbWidth = null;\n\n  \n  public thumbDom: ElementRef;\n\n  \n  public track: ElementRef;\n\n  \n  public trackBackground: string;\n\n  \n  public thumbBackground: string = \"#C3C3C3\";\n\n  // 最小值\n  \n  public min: number = null;\n\n  // 最大值\n  \n  public max: number = null;\n\n\n  /** value */\n  private _data: number = 0;\n\n  \n  public dataChange: EventEmitter<number> = new EventEmitter<number>();\n\n  \n  public get data(): number {\n    return this._data;\n  }\n\n  public set data(value: number) {\n    value = !this.floatable ? parseInt(value + \"\") : parseFloat(value + \"\");\n    if (isNaN(value)) value = this.min;\n    else if (this.max !== null && value > this.max) value = this.max;\n    else if (this.min !== null && value < this.min) value = this.min;\n    this._data = value;\n    this.renderer.setElementStyle(this.thumbDom.nativeElement, \"left\", value / (this.max - this.min) * 100 + \"%\");\n    if (this.isStart) {\n      this.dataChange.emit(this._data);\n    }\n  }\n\n  \n  public floatable: boolean = false;\n\n  \n  public click(event: MouseEvent) {\n    this.startDragging(event);\n    this.drag(event);\n    this.endDragging(event);\n  }\n\n  \n  public startDragging(event: MouseEvent) {\n    this.isDragging = true;\n    let rect = this.elementRef.nativeElement.getBoundingClientRect();\n    this.tmpWidth = rect.width;\n    this.tmpLeft = rect.left;\n    window.addEventListener(\"mousemove\", this.drag);\n    window.addEventListener(\"mouseup\", this.endDragging);\n  }\n\n  @bind\n  public drag(event: MouseEvent) {\n    if (!this.isDragging) return;\n    this.data = (event.pageX - this.tmpLeft) / this.tmpWidth * (this.max - this.min);\n  }\n\n  @bind\n  public endDragging(event: MouseEvent) {\n    window.removeEventListener(\"mousemove\", this.drag);\n    window.removeEventListener(\"mouseup\", this.endDragging);\n    this.isDragging = false;\n  }\n\n  public constructor(\n    public elementRef: ElementRef,\n    public renderer: Renderer,\n    public sanitizer: DomSanitizer,\n  ) { }\n\n  public ngAfterViewInit() {\n    this.isStart = true;\n    setTimeout(f => this.thumbWidth = this.thumbDom.nativeElement.offsetHeight, 100);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: \"ay-slider\",\n  template: `\n    <div class=\"track\" #bar=\"\" [style.background]=\"sanitizer.bypassSecurityTrustStyle(trackBackground)\"></div><div class=\"thumb\" #thumb=\"\" [style.background]=\"sanitizer.bypassSecurityTrustStyle(thumbBackground)\" [style.width.px]=\"thumbWidth\"></div>\n  `,\n  styles: [`\n    ay-slider {\n      display: inline-block;\n      position: relative;\n      width: 100%;\n      padding: 0; }\n      ay-slider .track {\n        position: relative;\n        width: 100%;\n        height: .4em;\n        top: .2em;\n        border-radius: .2em; }\n      ay-slider .thumb {\n        position: absolute;\n        top: 0;\n        left: 0;\n        background-color: #F2F2F2;\n        border-width: 1px;\n        border-radius: 100%;\n        border: 1px solid #FFF;\n        box-shadow: 0 1px 7px rgba(0, 0, 0, 0.05), 0 7px 17px rgba(0, 0, 0, 0.1);\n        z-index: 200;\n        transform: translateX(-0.4em);\n        height: .8em;\n        width: .8em;\n        cursor: pointer;\n        box-sizing: border-box; }\n  `],\n  encapsulation: ViewEncapsulation.None\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Renderer, },\n{type: DomSanitizer, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'thumbDom': [{ type: ViewChild, args: [\"thumb\", ] },],\n'track': [{ type: ViewChild, args: [\"track\", ] },],\n'trackBackground': [{ type: Input },],\n'thumbBackground': [{ type: Input },],\n'min': [{ type: Input },],\n'max': [{ type: Input },],\n'dataChange': [{ type: Output },],\n'data': [{ type: Input },],\n'floatable': [{ type: Input },],\n'click': [{ type: HostListener, args: [\"click\", ['$event'], ] },],\n'startDragging': [{ type: HostListener, args: [\"mousedown\", ['$event'], ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}